<div class="container">
<h2>{{titre}}</h2>

<form #addFom="ngForm">
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
          <label for="nom">Nom :</label>
          <input type="text" class="form-control" [(ngModel)]="new_personne.nom" id="nom" name="nom" required #nom="ngModel"/>
          <small id="nomHelp" class="form-text text-muted" [hidden]="nom.valid || nom.pristine">Champ non valide</small>
        </div>
        <div class="form-group">
          <label for="prenom">Prénom :</label>
          <input type="text" class="form-control" [(ngModel)]="new_personne.prenom" id="prenom" name="prenom" required #prenom="ngModel"/>
          <small id="prenomHelp" class="form-text text-muted" [hidden]="prenom.valid || prenom.pristine">Champ non valide</small>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group">
        <label for="age">Age :</label>
        <input type="text" class="form-control" [(ngModel)]="new_personne.age" id="age"  name="age" required #age="ngModel"/>
        <small id="ageHelp" class="form-text text-muted" [hidden]="age.valid || age.pristine">Champ non valide</small>
      </div>
      <div class="form-group">
        <label for="autorisation">Autorisation :</label> 
        <input type="text" class="form-control" [(ngModel)]="new_personne.autorisation" id="autorisation" name="autorisation" required #autorisation="ngModel"/>
        <small id="autorisationHelp" class="form-text text-muted" [hidden]="autorisation.valid || autorisation.pristine">Champ non valide</small>
      </div> 
    </div>
  </div>
  <button [disabled]="!addFom.valid" type="button" class="btn btn-success" (click)="ajoutPersonne()"> Ajouter un personne</button>
</form>
<div class="alert alert-info" role="alert">
  {{new_personne | json}}
</div>
<table class="table"> 
  <thead>
    <tr>
      <th>Nom</th>
      <th>Prénom</th>
      <th>Age</th>
      <th>Autorisation</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let person of personnes ; let i = index">
      <td>{{person.nom}}</td>
      <td>{{person.prenom}}</td>
      <td>{{person.age}}</td>
      <td>        
        <span *ngIf="person.autorisation">OUI</span>
        <span *ngIf="!person.autorisation">NON</span>
      </td>
      <td>
        <button class="saber" id="{{i+1}}" (click)="setId(i+1, $event); show = true;" >Détails</button>
      </td>
    </tr> 
  </tbody>
</table>
<div class="alert alert-info" role="alert" *ngIf="show">
  Vous avez cliquer à l'élément numéro : {{id}}
</div>

</div>